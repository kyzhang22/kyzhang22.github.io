{{/* Author profile box - customized */}}

{{/* Don't show author box on normal pages or if author box disabled. */}}
{{ if ne .Type "page" | and (not (or (eq site.Params.profile false) (eq .Params.profile false))) }}

{{ $authors := .Params.authors }}

{{/* If authors not set, fallback to superuser/owner from Scratch */}}
{{ if (not $authors) }}
  {{ $superuser := .Scratch.Get "superuser_slug" }}
  {{ if $superuser }}
    {{ $authors = (slice $superuser) }}
  {{ end }}
{{ end }}

{{ if $authors }}
  {{/* Only show full card for first author (me) */}}
  {{ $first_author := index $authors 0 }}
  {{ $profile := partial "functions/get_author_profile" $first_author }}
  {{ if $profile }}
    {{ partial "page_author_card" (dict "profile" $profile "page" .) }}
  {{ end }}

  {{/* Show other authors inline */}}
  {{ if gt (len $authors) 1 }}
  <div class="mt-4 text-gray-600 dark:text-gray-400">
    <span class="font-semibold">Co-authors: </span>
    {{ range $idx, $slug := (after 1 $authors) }}
      {{ $co_profile := partial "functions/get_author_profile" $slug }}
      {{ if $co_profile }}
        {{ if $idx }}, {{ end }}
        <span>{{ $co_profile.title }}</span>
      {{ end }}
    {{ end }}
  </div>
  {{ end }}
{{ end }}

{{end}}{{/* Show profile block */}}
